<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Funhub Navigation</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* General Body Styling */
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: #121212;
      color: #fff;
      display: flex;
      height: 100vh;
      overflow: hidden; /* Prevent body scroll, individual pages will scroll */
      position: relative; /* For auth modal positioning */
    }

    /* Input & Textarea General Styling */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    textarea {
      width: calc(100% - 30px);
      padding: 12px 15px;
      margin-bottom: 15px;
      border: 1px solid #333;
      border-radius: 10px;
      background: #333;
      color: #fff;
      font-size: 16px;
      outline: none;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    input:focus, textarea:focus {
      border-color: #00c853;
      box-shadow: 0 0 0 2px rgba(0, 200, 83, 0.3);
    }

    /* Button General Styling */
    button {
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    button:hover {
      transform: translateY(-2px);
    }

    /* Modal Styling */
    #commentModal {
      display: none; /* Hidden by default */
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    #commentModalContent {
      background: #1c1c1c;
      padding: 25px;
      border-radius: 20px;
      width: 90%;
      max-width: 500px;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
    }

    #commentPostPreview {
        background: #333;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
        overflow-y: auto;
        max-height: 150px; /* Limit height of preview */
    }

    #commentsList {
      flex-grow: 1;
      overflow-y: auto;
      margin-bottom: 15px;
      padding-right: 10px; /* For scrollbar */
    }

    .comment-item {
      background: #333;
      padding: 10px 15px;
      border-radius: 10px;
      margin-bottom: 8px;
      font-size: 14px;
    }

    #commentInputContainer {
      display: flex;
      gap: 10px;
      margin-top: auto; /* Push to bottom */
    }

    #commentInputContainer input {
      flex-grow: 1;
      margin-bottom: 0;
      border-radius: 20px;
    }

    #commentInputContainer button {
      background: #00c853;
      color: #000;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: bold;
    }

    /* Post Card Styling */
    .post-card {
        background: #1c1c1c;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        position: relative;
    }

    .post-card .post-actions > div {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 14px;
        color: #fff;
        cursor: pointer;
        transition: color 0.2s ease, fill 0.2s ease;
    }

    .post-card .post-actions > div:hover {
        color: #00c853;
    }
    .post-card .post-actions > div:hover svg {
        fill: #00c853;
    }

    /* Active states for like/dislike */
    .post-card .post-actions > div.active-like {
        color: #00c853 !important;
    }
    .post-card .post-actions > div.active-like svg {
        fill: #00c853 !important;
    }
    .post-card .post-actions > div.active-dislike {
        color: #f44336 !important;
    }
    .post-card .post-actions > div.active-dislike svg {
        fill: #f44336 !important;
    }


    /* Dropdown Styling */
    .post-settings-dropdown {
        display: none;
        position: fixed; /* Use fixed for proper positioning regardless of scroll */
        background: #2a2a2a;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        min-width: 150px;
        z-index: 1000;
        padding: 8px 0;
    }

    .post-settings-dropdown div {
        padding: 10px 15px;
        cursor: pointer;
        font-size: 15px;
        color: #fff;
        transition: background-color 0.2s ease;
    }

    .post-settings-dropdown div:hover {
        background: #3a3a3a;
    }

    /* Back Button Styling */
    .back-button {
      position: absolute;
      top: 15px;
      left: 15px;
      width: 40px;
      height: 40px;
      background: rgba(0,0,0,0.4);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      transition: background-color 0.2s ease;
    }

    .back-button:hover {
      background: rgba(0,0,0,0.6);
    }

    .back-button svg {
      width: 24px;
      height: 24px;
      fill: #fff;
    }

    /* Flexible Page Layout */
    .flex-page {
        display: flex;
        flex-direction: column;
        height: 100%; /* Occupy full height of parent */
        overflow: hidden; /* Manage scrolling inside */
    }

    /* Sidebar Styling */
    #sidebar {
      width: 250px;
      background: #1c1c1c;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 4px 0 15px rgba(0,0,0,0.4);
    }

    #sidebar .profile-section {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #333;
      width: 100%;
    }

    #sidebar .profile-avatar {
      width: 80px;
      height: 80px;
      background: #a259ff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 10px;
      border: 3px solid #00c853;
    }

    #sidebar .profile-name {
      font-size: 20px;
      font-weight: bold;
    }

    #sidebar .nav-items {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    #sidebar .nav-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.2s ease, color 0.2s ease;
    }

    #sidebar .nav-item:hover {
      background: #333;
    }

    #sidebar .nav-item.active {
      background: #00c853;
      color: #000;
      font-weight: bold;
    }

    #sidebar .nav-item svg {
      width: 28px;
      height: 28px;
      fill: #fff;
    }

    #sidebar .nav-item.active svg {
      fill: #000;
    }

    /* Main Content Area */
    #mainContent {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden; /* Pages will handle their own scrolling */
    }

    /* Page container */
    .page {
      display: none;
      flex-direction: column; /* Default for pages */
      flex-grow: 1;
      overflow-y: auto; /* Enable scrolling for page content */
      padding-bottom: 80px; /* Space for bottom nav on mobile */
      box-sizing: border-box;
      position: relative; /* For back button positioning */
    }

    .page.active {
      display: flex; /* Activate and show the page */
    }

    /* Responsive adjustments (e.g., for PC view) */
    @media (min-width: 768px) {
      body {
        display: flex;
        flex-direction: row; /* Sidebar and main content side-by-side */
      }

      #sidebar {
        display: flex !important; /* Always show sidebar on large screens */
      }

      #bottomNavBar {
        display: none !important; /* Hide bottom nav on large screens */
      }

      .page {
        padding-bottom: 20px; /* Less padding needed for PC */
      }
    }
  </style>
</head>
<body>

<div id="authModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(5px); z-index:9998; align-items:center; justify-content:center;">
  <div id="loginForm" style="background:#1c1c1c; padding:30px; border-radius:20px; width:90%; max-width:400px; text-align:center; color:#fff; margin:auto; box-shadow: 0 8px 30px rgba(0,0,0,0.6);">
    <h2>Selamat Datang di Funhub</h2>
    <input type="email" placeholder="Email" id="loginUsername" /> <input type="password" placeholder="Password" id="loginPassword" />
    <button onclick="startApp()" style="background:#00c853; color:#fff; border:none; padding:12px 25px; border-radius:25px; font-weight:bold; font-size:16px; margin-top:10px;">Masuk</button>
    <p style="margin-top:25px; font-size:14px;">Belum punya akun? <span style="color:#00c853; cursor:pointer; font-weight:bold;" onclick="showRegister()">Daftar Sekarang</span></p>
  </div>

  <div id="registerForm" style="display:none; background:#1c1c1c; padding:30px; border-radius:20px; width:90%; max-width:400px; text-align:center; color:#fff; margin:auto; box-shadow: 0 8px 30px rgba(0,0,0,0.6);">
    <h2>Buat Akun Baru</h2>
    <input type="text" placeholder="Username" id="registerUsername" />
    <input type="email" placeholder="Email" id="registerEmail" />
    <input type="password" placeholder="Password" id="registerPassword" />
    <button onclick="registerUser()" style="background:#00c853; color:#fff; border:none; padding:12px 25px; border-radius:25px; font-weight:bold; font-size:16px; margin-top:10px;">Daftar</button>
    <p style="margin-top:25px; font-size:14px;">Sudah punya akun? <span style="color:#00c853; cursor:pointer; font-weight:bold;" onclick="showLogin()">Masuk</span></p>
  </div>
</div>

<div id="sidebar" style="display:none;">
    <div class="profile-section">
        <div class="profile-avatar">
          <svg style="width:40px; height:40px; fill:#fff;" viewBox="0 0 24 24">
            <circle cx="12" cy="8" r="4"/>
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
          </svg>
        </div>
        <span class="profile-name" id="sidebarUsername"></span>
        <button onclick="showPage('profil')" style="background:#a259ff; color:#fff; border:none; padding:8px 15px; border-radius:20px; font-weight:bold; font-size:14px; margin-top:10px;">Lihat Profil</button>
    </div>

    <div class="nav-items" style="flex-grow:1;">
        <div class="nav-item" id="sidebar-btn-beranda" onclick="showPage('beranda')">
            <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span>Beranda</span>
        </div>
        <div class="nav-item" id="sidebar-btn-pesan" onclick="showPage('pesan')">
            <svg viewBox="0 0 24 24"><path d="M20 4H4a2 2 0 0 0-2 2v12l4-4h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/></svg>
            <span>Pesan</span>
        </div>
        <div class="nav-item" id="sidebar-btn-notifikasi" onclick="showPage('notifikasi')">
            <svg viewBox="0 0 24 24"><path d="M12 24a2.4 2.4 0 002.4-2.4h-4.8A2.4 2.4 0 0012 24zm6.3-6v-5.25c0-3.15-1.65-5.85-4.8-6.45v-.6a1.5 1.5 0 00-3 0v.6C7.35 6.9 5.7 9.6 5.7 12.75V18l-1.5 1.5v.75h18v-.75L18.3 18z" /></svg>
            <span>Notifikasi</span>
        </div>
    </div>

    <button onclick="logout()" style="background:red; color:#fff; border:none; padding:12px 25px; border-radius:25px; font-weight:bold; font-size:16px; margin-top:20px;">Logout</button>
</div>

<div id="mainContent" style="flex-grow:1; display:flex; flex-direction:column; height:100vh; overflow:hidden;">

    <div id="topBar" style="position:sticky; top:0; z-index:999; background:rgba(0,0,0,0.8); backdrop-filter:blur(8px); padding:12px; display:flex; justify-content:space-between; align-items:center;">
      <div onclick="showPage('profil')" style="cursor:pointer; display:flex; align-items:center; gap:10px;">
        <div style="width:40px; height:40px; border-radius:50%; background:#a259ff; display:flex; align-items:center; justify-content:center;">
          <svg style="width:22px; height:22px; fill:#fff;" viewBox="0 0 24 24">
            <circle cx="12" cy="8" r="4"/>
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
          </svg>
        </div>
        <span style="font-weight:bold;" id="loggedInUsername"></span>
      </div>
      <div onclick="showPage('notifikasi')" style="cursor:pointer;">
        <svg style="width:28px; height:28px; fill:red;" viewBox="0 0 24 24">
          <path d="M12 24a2.4 2.4 0 002.4-2.4h-4.8A2.4 2.4 0 0012 24zm6.3-6v-5.25c0-3.15-1.65-5.85-4.8-6.45v-.6a1.5 1.5 0 00-3 0v.6C7.35 6.9 5.7 9.6 5.7 12.75V18l-1.5 1.5v.75h18v-.75L18.3 18z" />
        </svg>
      </div>
    </div>

    <div id="searchBar" style="display:flex; align-items:center; gap:10px; padding:12px; background:rgba(0,0,0,0.8); backdrop-filter:blur(8px);">
      <div style="flex:1; display:flex; background:#fff; border-radius:25px; overflow:hidden; border:1px solid #444;">
        <input type="text" placeholder="Cari sesuatu..." style="flex:1; padding:10px 15px; border:none; outline:none; background:#333 !important; color:#fff !important; border-radius:25px 0 0 25px !important; margin-bottom:0 !important;" id="searchInput"/>
        <div style="padding:10px; cursor:pointer; background:#333; border-radius:0 25px 25px 0;" onclick="performSearch()">
          <svg style="width:18px; height:18px; fill:#aaa;" viewBox="0 0 24 24">
            <path d="M21 21l-4.35-4.35m2.1-5.4a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z"/>
          </svg>
        </div>
      </div>
      <button id="actionButton" onclick="showPage('tambah-grup')" style="background:#00c853; color:#fff; border:none; padding:10px 18px; border-radius:25px; font-weight:bold; white-space:nowrap;">+ Buat Grup</button>
    </div>

    <div id="page-beranda" class="page" style="padding:20px;">
      <div style="font-weight:bold; font-size:22px; margin-bottom:15px;">Grup Saya</div>
      <div id="myGroupsContainer" style="display:flex; flex-direction:column; gap:10px;">
        </div>
      </div>

    <div id="page-pesan" class="page" style="padding:20px;">
      <div style="font-weight:bold; font-size:22px; margin-bottom:15px;">Pesan</div>
      <div style="background:#1c1c1c; margin-top:10px; border-radius:15px; padding:15px; cursor:pointer; display:flex; align-items:center; box-shadow: 0 2px 8px rgba(0,0,0,0.3);" onclick="showPage('chat-amelia')">
        <div style="width:40px; height:40px; background:purple; border-radius:50%; margin-right:15px; display:flex; align-items:center; justify-content:center; font-weight:bold;">AP</div>
        <span style="font-size:18px;">Obrolan Umum</span> </div>
    </div>

    <div id="page-profil" class="page" style="padding:30px; text-align:center;">
      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>
      <div style="font-size:26px; font-weight:bold; margin-top:20px;">Profil Saya</div>
      <div style="width:120px; height:120px; background:#a259ff; border-radius:50%; margin:20px auto; border: 4px solid #00c853;"></div>
      <div style="font-size:24px; font-weight:bold;" id="myProfileUsername"></div> <p style="font-size:16px; color:#aaa;">"Selamat datang di profil saya!"</p>
      <p style="margin-top:15px; font-size:16px;">Fans: <strong id="myFansCount">0</strong> | Hatters: <strong id="myHattersCount">0</strong></p>
      <button onclick="alert('Fitur edit profil belum diimplementasikan.')" style="margin-top:25px; padding:12px 25px; background:#00c853; color:#fff; border:none; border-radius:25px; font-weight:bold; font-size:16px;">Edit Profil</button>

      <div style="margin-top:40px; font-weight:bold; font-size:20px; text-align:left;">Postingan Saya</div>
      <div id="myPostsContainer" style="margin-top:15px; display:flex; flex-direction:column; gap:15px;">
        </div>
      <button onclick="logout()" style="margin-top:40px; padding:12px 25px; background:red; color:#fff; border:none; border-radius:25px; font-weight:bold; font-size:16px;">Logout</button>
    </div>

    <div id="page-group-detail" class="page flex-page" style="padding:0; font-family:sans-serif;">

      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>

      <div id="groupBannerContainer" style="position:relative; background:#00c853; height:180px; border-bottom-left-radius:30px; border-bottom-right-radius:30px; display:flex; align-items:center; justify-content:center; overflow:hidden;">
        <img id="groupBannerImage" src="" alt="Group Banner" style="width:100%; height:100%; object-fit:cover; display:none;">
        <div id="uploadBannerPrompt" style="color:#fff; font-weight:bold; text-align:center;">
            <svg style="width:40px; height:40px; fill:#fff; margin-bottom:10px;" viewBox="0 0 24 24"><path d="M12 5v14m7-7H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg><br>Upload Banner
        </div>
        <input type="file" id="bannerUploadInput" accept="image/*" style="position:absolute; inset:0; opacity:0; cursor:pointer;" onchange="uploadGroupBanner(event)">
      </div>

      <div style="padding:20px; flex:1; overflow-y:auto;">
        <h2 id="groupNameDisplay" style="text-align:center; margin-top:-30px; font-weight:bold; font-size:28px; background:#000; padding:10px 20px; border-radius:15px; display:inline-block; position:relative; left:50%; transform:translateX(-50%); box-shadow: 0 5px 15px rgba(0,0,0,0.5);"></h2>
        <p id="groupDescriptionDisplay" style="text-align:center; font-size:15px; color:#aaa; margin-top:10px;"></p>
        <p id="groupAdminBadge" style="text-align:center; font-size:14px; color:#00c853; font-weight:bold; display:none;">Admin</p>

        <div id="groupAdminActions" style="display:none; margin:25px 0; text-align:center;">
          <button onclick="alert('Fitur pengaturan grup belum diimplementasikan.')" style="background:#a259ff; color:#fff; border:none; padding:10px 20px; border-radius:25px; margin-right:15px; font-weight:bold;">Pengaturan Grup</button>
          <button onclick="alert('Fitur promosikan anggota belum diimplementasikan.')" style="background:#a259ff; color:#fff; border:none; padding:10px 20px; border-radius:25px; font-weight:bold;">Promosikan Anggota</button>
        </div>

        <div onclick="showPage('buat-post')" style="margin:25px 0; background:#1c1c1c; border-radius:20px; padding:15px; text-align:center; cursor:pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">
          <div style="background:#333; border-radius:15px; padding:12px; font-weight:bold; margin-bottom:10px; color:#aaa;">Buat post baru...</div>
          <div style="display:flex; justify-content:space-around;">
            <div><svg style="width:28px; height:28px; fill:#00c853;" viewBox="0 0 24 24"><path d="M17 10.5V6c0-1.1-.9-2-2-2H5C3.9 4 3 4.9 3 6v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-4.5l4 4v-11l-4 4z"/></svg></div>
            <div><svg style="width:28px; height:28px; fill:#00c853;" viewBox="0 0 24 24"><path d="M12 5c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm-2 11l-3-3 1.41-1.41L10 13.17l5.59-5.59L17 9l-7 7z"/></svg></div>
            <div><svg style="width:28px; height:28px; fill:#00c853;" viewBox="0 0 24 24"><path d="M12 2C8.1 2 5 5.1 5 9c0 5.2 7 13 7 13s7-7.8 7-13c0-3.9-3.1-7-7-7zm0 9.5c-1.4 0-2.5-1.1-2.5-2.5S10.6 6.5 12 6.5 14.5 7.6 14.5 9 13.4 11.5 12 11.5z"/></svg></div>
          </div>
        </div>

        <div id="groupPostsContainer">
          </div>
      </div>
    </div>

    <div id="page-chat-amelia" class="page flex-page" style="background:#000; color:#fff;">

      <div style="background:#00c853; padding:15px 20px; display:flex; align-items:center; justify-content:space-between; border-bottom-left-radius:20px; border-bottom-right-radius:20px; box-shadow: 0 4px 10px rgba(0,200,83,0.3); flex-shrink:0;">
        <div style="display:flex; align-items:center; gap:15px;">
          <div onclick="history.back()" style="width:35px; height:35px; background:#00a045; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer;">
            <svg style="width:20px; height:20px; fill:#fff;" viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
          </div>
          <div style="width:40px; height:40px; background:purple; border-radius:50%;"></div>
          <div style="font-weight:bold; font-size:18px;">Obrolan Umum</div> </div>
        <div style="display:flex; align-items:center; gap:10px;">
          <svg style="width:28px; height:28px; fill:#fff;" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
        </div>
      </div>

      <div id="chatContent" style="flex:1; padding:20px; overflow-y:auto; display:flex; flex-direction:column; gap:12px;">
        </div>

      <div style="background:#1c1c1c; padding:10px 15px; display:flex; align-items:center; border-top-left-radius:20px; border-top-right-radius:20px; box-shadow: 0 -4px 10px rgba(0,0,0,0.4); flex-shrink:0;">
        <div style="display:flex; gap:10px; margin-right:10px;">
          <div style="width:36px; height:36px; background:#00c853; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer;">
            <svg style="width:20px; height:20px; fill:#fff;" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
          </div>
          <div style="width:36px; height:36px; background:#00c853; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer;">
            <svg style="width:20px; height:20px; fill:#fff;" viewBox="0 0 24 24"><path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.2-3c0 3.53-2.64 6.43-6.2 6.94V21h-2v-3.06c-3.56-.51-6.2-3.42-6.2-6.94H3c0 4.19 3.31 7.67 7.5 8.32V21h3v-2.68c4.19-.65 7.5-4.13 7.5-8.32h-2z"/></svg>
          </div>
        </div>
        <input type="text" placeholder="Ketik sesuatu" style="flex:1; padding:10px 15px; border:none; outline:none; font-weight:bold; font-size:16px; background:#333 !important; color:#fff !important; border-radius:20px !important; margin-bottom:0 !important;" id="chatInput"/>
        <div onclick="sendMessage()" style="width:36px; height:36px; background:#00c853; border-radius:50%; margin-left:10px; display:flex; align-items:center; justify-content:center; cursor:pointer;">
            <svg style="width:20px; height:20px; fill:#fff;" viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
            </svg>
        </div>
      </div>
    </div>

    <div id="page-tambah-grup" class="page flex-page" style="background:#000; color:#fff;">

        <div class="back-button" onclick="history.back()">
          <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
        </div>

        <div style="font-size:22px; font-weight:bold; margin:0 20px 20px;">Buat Grup Baru</div>

        <div style="position:relative; height:180px; background:#1c1c1c; display:flex; align-items:center; justify-content:center; cursor:pointer; margin:0 20px; border-radius:15px; overflow:hidden;">
            <img id="newGroupBannerPreview" src="" alt="Banner Preview" style="width:100%; height:100%; object-fit:cover; display:none;">
            <div id="newGroupUploadPrompt" style="text-align:center; color:#aaa;">
                <div style="font-size:16px;">Tambah Banner Grup</div>
                <div style="margin-top:10px; width:50px; height:50px; border-radius:50%; background:#00c853; display:flex; align-items:center; justify-content:center;">
                    <svg style="width:24px; height:24px; fill:#000;" viewBox="0 0 24 24">
                        <path d="M12 5v14m7-7H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
            </div>
            <input type="file" id="newGroupBannerInput" accept="image/*" style="position:absolute; inset:0; opacity:0; cursor:pointer;" onchange="previewNewGroupBanner(event)">
        </div>

        <div style="padding:20px; flex:1; display:flex; flex-direction:column; gap:16px; overflow-y:auto;">

            <div>
                <label style="font-size:14px; color:#aaa;">Nama Grup</label>
                <input type="text" placeholder="Contoh: Metal Punk Indonesia" id="newGroupName" />
            </div>

            <div>
                <label style="font-size:14px; color:#aaa;">Deskripsi</label>
                <textarea placeholder="Tulis deskripsi grup..." id="newGroupDescription"></textarea>
            </div>

            <button onclick="createNewGroup()" style="margin-top:auto; padding:15px; background:#00c853; color:#000; border:none; border-radius:30px; font-weight:bold; font-size:18px; cursor:pointer;">
                + Buat Grup
            </button>

        </div>
    </div>

    <div id="page-buat-post" class="page flex-page" style="background:#000; color:#fff;">
        <div class="back-button" onclick="history.back()">
          <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
        </div>
        <div style="font-size:22px; font-weight:bold; margin:0 20px 20px;">Buat Postingan Baru</div>

        <div style="padding:0 20px; flex:1; overflow-y:auto;">
            <div>
                <label style="font-size:14px; color:#aaa;">Judul Post</label>
                <input type="text" placeholder="Judul postingan Anda" id="postTitleInput" />
            </div>

            <div>
                <label style="font-size:14px; color:#aaa;">Isi Post</label>
                <textarea placeholder="Tulis isi postingan Anda di sini..." id="postContentInput"></textarea>
            </div>

            <div style="margin-top:15px; margin-bottom:20px; display:flex; gap:15px; justify-content:center;">
                <div style="width:50px; height:50px; background:#1c1c1c; border-radius:10px; display:flex; align-items:center; justify-content:center; cursor:pointer;" onclick="document.getElementById('postImageInput').click();">
                    <svg style="width:28px; height:28px; fill:#00c853;" viewBox="0 0 24 24"><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM8.5 13.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z"/></svg>
                    <input type="file" id="postImageInput" accept="image/*,video/*" style="display:none;" onchange="previewPostMedia(event)">
                </div>
                <div style="width:50px; height:50px; background:#1c1c1c; border-radius:10px; display:flex; align-items:center; justify-content:center; cursor:pointer;">
                    <svg style="width:28px; height:28px; fill:#00c853;" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                </div>
            </div>
            <img id="postImagePreview" src="" style="max-width:100%; border-radius:10px; margin-top:10px; display:none;">
            <video id="postVideoPreview" src="" controls style="max-width:100%; border-radius:10px; margin-top:10px; display:none;"></video>

            <button onclick="createNewPost()" style="margin-top:20px; padding:15px; background:#00c853; color:#000; border:none; border-radius:30px; font-weight:bold; font-size:18px; cursor:pointer;">
                Unggah Postingan
            </button>
        </div>
    </div>

    <div id="page-tambah-pesan" class="page" style="padding:20px;">
      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>
      <div style="font-size:22px; font-weight:bold; margin-bottom:20px;">Kirim Pesan Baru</div>
      <input type="text" placeholder="Kepada..." style="width:100%; margin-bottom:15px;" />
      <textarea placeholder="Tulis pesan..." style="width:100%; height:120px;"></textarea>
      <button onclick="alert('Fitur kirim pesan ke individu belum diimplementasikan.')" style="margin-top:20px; padding:12px 25px; background:#00c853; color:#fff; border:none; border-radius:25px; font-weight:bold; font-size:16px;">Kirim</button>
    </div>

    <div id="page-notifikasi" class="page" style="padding:20px;">
      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>
      <div style="font-size:22px; font-weight:bold; margin-bottom:20px;">Notifikasi</div>
      <div style="background:#1f1f1f; padding:15px 20px; border-radius:15px; margin-bottom:10px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">🔥 Amelia mengirim pesan baru</div>
      <div style="background:#1f1f1f; padding:15px 20px; border-radius:15px; margin-bottom:10px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">🎉 Kamu ditambahkan ke Grup Funhub</div>
      <div style="background:#1f1f1f; padding:15px 20px; border-radius:15px; margin-bottom:10px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);">👍 Postingan Anda disukai oleh <strong>Budi</strong></div>
    </div>

    <div id="page-hasil-pencarian" class="page" style="padding:20px;">
      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>
      <div style="font-size:22px; font-weight:bold; margin-bottom:20px;">Hasil Pencarian untuk "<span id="searchQueryDisplay"></span>"</div>
      <h3 style="margin-bottom:10px; color:#00c853;">Pengguna</h3>
      <div id="userSearchResults" style="display:flex; flex-direction:column; gap:10px;">
        </div>
      <h3 style="margin-top:25px; margin-bottom:10px; color:#00c853;">Postingan</h3>
      <div id="postSearchResults" style="display:flex; flex-direction:column; gap:10px;">
        </div>
    </div>

    <div id="page-profil-user-lain" class="page" style="padding:30px; text-align:center;">
      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>
      <div style="font-size:26px; font-weight:bold; margin-top:20px;" id="otherUserName"></div>
      <div style="width:120px; height:120px; background:#a259ff; border-radius:50%; margin:20px auto; border: 4px solid #00c853;"></div>
      <p style="font-size:16px; color:#aaa;">"Hai, salam kenal!"</p>
      <p style="margin-top:15px; font-size:16px;">Fans: <strong id="otherUserFansCount">0</strong> | Hatters: <strong id="otherUserHattersCount">0</strong></p>
      <div style="margin-top:25px;">
        <button id="fanButton" onclick="toggleFan()" style="padding:12px 25px; background:#555; color:#fff; border:none; border-radius:25px; margin-right:15px; font-weight:bold; font-size:16px;">Fans</button>
        <button id="hatterButton" onclick="toggleHatter()" style="padding:12px 25px; background:#555; color:#fff; border:none; border-radius:25px; font-weight:bold; font-size:16px;">Hatters</button>
      </div>
      <div style="margin-top:40px; font-weight:bold; font-size:20px; text-align:left;">Postingan</div>
      <div id="otherUserPostsContainer" style="margin-top:15px; display:flex; flex-direction:column; gap:15px;">
        </div>
    </div>

    <div id="page-setting-grup" class="page flex-page" style="background:#000; color:#fff;">
      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>
      <div style="font-size:22px; font-weight:bold; margin:0 20px 20px;">Pengaturan Grup</div>

      <div style="padding:0 20px; flex:1; overflow-y:auto;">
        <div style="margin-bottom:20px;">
          <label style="font-size:14px; color:#aaa;">Nama Grup</label>
          <input type="text" id="groupSettingName" value="" /> </div>
        <div style="margin-bottom:20px;">
          <label style="font-size:14px; color:#aaa;">Deskripsi Grup</label>
          <textarea id="groupSettingDescription"></textarea> </div>
        <button onclick="alert('Fitur simpan pengaturan grup belum diimplementasikan.')" style="width:100%; padding:15px; background:#00c853; color:#000; border:none; border-radius:30px; font-weight:bold; font-size:18px;">Simpan Perubahan</button>
      </div>
    </div>

    <div id="page-promosikan-anggota" class="page flex-page" style="background:#000; color:#fff;">
      <div class="back-button" onclick="history.back()">
        <svg viewBox="0 0 24 24"><path d="M15 6l-6 6 6 6"/></svg>
      </div>
      <div style="font-size:22px; font-weight:bold; margin:0 20px 20px;">Promosikan Anggota</div>

      <div style="padding:0 20px; flex:1; overflow-y:auto;">
        <input type="text" placeholder="Cari anggota..." style="margin-bottom:20px;" />
        <div style="background:#1c1c1c; padding:15px; border-radius:15px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center;">
          <span>Budi Santoso</span>
          <select style="background:#00c853; color:#fff; border:none; padding:8px 12px; border-radius:10px;">
            <option value="member">Anggota</option>
            <option value="moderator">Moderator</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <div style="background:#1c1c1c; padding:15px; border-radius:15px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center;">
          <span>Amelia Putri</span>
          <select style="background:#00c853; color:#fff; border:none; padding:8px 12px; border-radius:10px;">
            <option value="member">Anggota</option>
            <option value="moderator">Moderator</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <button onclick="alert('Fitur simpan peran belum diimplementasikan!')" style="width:100%; padding:15px; background:#00c853; color:#000; border:none; border-radius:30px; font-weight:bold; font-size:18px; margin-top:20px;">Simpan Peran</button>
      </div>
    </div>

    <div id="commentModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(5px); z-index:9999; align-items:center; justify-content:center; padding:20px;">
        <div id="commentModalContent" style="background:#1c1c1c; padding:25px; border-radius:20px; width:90%; max-width:500px; max-height:80vh; display:flex; flex-direction:column; overflow:hidden; box-shadow: 0 8px 30px rgba(0,0,0,0.6);">
            <h3 style="margin-top:0; color:#00c853;">Komentar</h3>
            <div id="commentPostPreview" style="background: #333; padding: 15px; border-radius: 10px; margin-bottom: 15px; overflow-y: auto; max-height: 150px;">
                </div>
            <div id="commentsList" style="flex-grow: 1; overflow-y: auto; margin-bottom: 15px; padding-right: 10px;">
                </div>
            <div id="commentInputContainer" style="display: flex; gap: 10px; margin-top: auto;">
                <input type="text" id="newCommentInput" placeholder="Tambah komentar..." style="flex-grow: 1; margin-bottom: 0; border-radius: 20px;" />
                <button onclick="addComment()" style="background:#00c853; color:#000; border:none; padding:10px 20px; border-radius:20px; font-weight:bold;">Kirim</button>
            </div>
            <button onclick="closeCommentModal()" style="background:#f44336; color:#fff; border:none; padding:10px 20px; border-radius:20px; margin-top:15px;">Tutup</button>
        </div>
    </div>

    <div id="postSettingsDropdown" class="post-settings-dropdown" style="display:none; position:fixed; background:#2a2a2a; border-radius:10px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); min-width:150px; z-index:1000; padding:8px 0;">
        <div onclick="editPost()">Edit Postingan</div>
        <div onclick="deletePost()">Hapus Postingan</div>
    </div>

</div>

<div id="bottomNavBar" style="position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(18,18,18,0.9); backdrop-filter:blur(8px); padding:15px 45px; border-radius:40px; display:flex; gap:60px; z-index:1000;">
  <div onclick="showPage('beranda')" id="btn-beranda" style="cursor:pointer; display:flex; flex-direction:column; align-items:center;">
    <svg style="width:36px; height:36px; fill:#00c853;" viewBox="0 0 24 24">
      <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    </svg>
    <span style="font-size:12px; margin-top:5px; color:#00c853;">Beranda</span>
  </div>
  <div onclick="showPage('pesan')" id="btn-pesan" style="cursor:pointer; display:flex; flex-direction:column; align-items:center;">
    <svg style="width:36px; height:36px; fill:#fff;" viewBox="0 0 24 24">
      <path d="M20 4H4a2 2 0 0 0-2 2v12l4-4h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"/>
    </svg>
    <span style="font-size:12px; margin-top:5px; color:#fff;">Pesan</span>
  </div>
</div>

<script type="module" src="script.js"></script>
</body>
</html>
